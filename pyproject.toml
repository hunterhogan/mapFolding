[build-system]
requires = ["setuptools>=61.0", "wheel"]
build-backend = "setuptools.build_meta"

[project]
name = "mapFolding"
description = "Algorithm(s) for counting distinct ways to fold a map (or a strip of stamps)"
readme = "README.md"
authors = [{ name = "Hunter Hogan", email = "HunterHogan@pm.me" }]
version = "0.1.3"
requires-python = ">=3.10,<3.13"
dependencies = ["numba", "numpy", "Z0Z-tools"]
urls = { homepage = "https://github.com/hunterhogan/mapFolding" }

[project.scripts]
getOEISids = "mapFolding.oeis:getOEISids"
clearOEIScache = "mapFolding.oeis:clearOEIScache"
OEIS_for_n = "mapFolding.oeis:OEIS_for_n"

[project.optional-dependencies]
benchmark = ["pandas", "matplotlib", "seaborn", "jupyter", "ipywidgets", "tqdm"]
cupy = ["cupy-cuda12x<13.0"]
jax = ["jax", "jaxtyping"]
py310 = [
    "cupy-cuda12x<13.0",
    "google-auth==2.27.0",
    "ipykernel==5.5.6",
    "ipyparallel==8.8.0",
    "ipython==7.34.0",
    "jupyter",
    "notebook==6.5.5",
    "numpy<2.0",
    "pandas==2.2.2",
    "portpicker==1.5.2",
    "requests==2.32.3",
    "tornado==6.3.3",
]
testing = ["pytest", "pytest-cov", "pytest-env", "pytest-xdist", "coverage"]

[tool.setuptools]
include-package-data = true
[tool.setuptools.packages.find]
where = ["."]
include = ["*"]

[tool.coverage.run]
branch = true
source = ["mapFolding"]
data_file = "tests/coverage/.coverage"
omit = ["tests/*", "Z0Z_*"]

[tool.coverage.report]
exclude_lines = ["if TYPE_CHECKING:", "if __name__ == \"__main__\":", "pass"]
ignore_errors = false

[tool.coverage.xml]
output = "tests/coverage/coverage.xml"

[tool.pytest.ini_options]
testpaths = ["tests"]
addopts = ["--color=yes", "-n 8"]
env = ["NUMBA_DISABLE_JIT=1"]
